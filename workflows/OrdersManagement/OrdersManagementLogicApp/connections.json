{
  // This file defines the managed API connections used by the OrdersManagement Logic App workflow.
  // It configures connections for Azure Service Bus and Azure Blob Storage using Managed Service Identity (MSI) authentication.
  // Connection properties reference app settings and parameters for subscription, resource group, and identity configuration.
  "managedApiConnections": {
    // Azure Service Bus connection for messaging operations
    "servicebus": {
      "api": {
        "id": "/subscriptions/@{appsetting('WORKFLOWS_SUBSCRIPTION_ID')}/providers/Microsoft.Web/locations/@{appsetting('WORKFLOWS_LOCATION_NAME')}/managedApis/servicebus"
      },
      "connection": {
        "id": "/subscriptions/@{appsetting('WORKFLOWS_SUBSCRIPTION_ID')}/resourceGroups/@{appsetting('WORKFLOWS_RESOURCE_GROUP_NAME')}/providers/Microsoft.Web/connections/servicebus"
      },
      "authentication": "@parameters('servicebus-Authentication')",
      "connectionRuntimeUrl": "@parameters('servicebus-ConnectionRuntimeUrl')",
      "connectionProperties": {
        "authentication": {
          "type": "ManagedServiceIdentity",
          "identity": "/subscriptions/${WORKFLOWS_SUBSCRIPTION_ID}/resourcegroups/${AZURE_RESOURCE_GROUP}/providers/Microsoft.ManagedIdentity/userAssignedIdentities/${MANAGED_IDENTITY_NAME}",
          "audience": "https://servicebus.azure.net"
        }
      }
    },
    "azureblob": {
      "api": {
        "id": "/subscriptions/@{appsetting('WORKFLOWS_SUBSCRIPTION_ID')}/providers/Microsoft.Web/locations/@{appsetting('WORKFLOWS_LOCATION_NAME')}/managedApis/azureblob"
      },
      "connection": {
        "id": "/subscriptions/@{appsetting('WORKFLOWS_SUBSCRIPTION_ID')}/resourceGroups/@{appsetting('WORKFLOWS_RESOURCE_GROUP_NAME')}/providers/Microsoft.Web/connections/azureblob"
      },
      "authentication": "@parameters('azureblob-Authentication')",
      "connectionRuntimeUrl": "@parameters('azureblob-ConnectionRuntimeUrl')",
      "connectionProperties": {
        "authentication": {
          "type": "ManagedServiceIdentity",
          "identity": "/subscriptions/${WORKFLOWS_SUBSCRIPTION_ID}/resourcegroups/${AZURE_RESOURCE_GROUP}/providers/Microsoft.ManagedIdentity/userAssignedIdentities/${MANAGED_IDENTITY_NAME}",
          "audience": "https://storage.azure.com/"
        }
      }
    },
    "azureblob-1": {
      "api": {
        "id": "/subscriptions/@{appsetting('WORKFLOWS_SUBSCRIPTION_ID')}/providers/Microsoft.Web/locations/@{appsetting('WORKFLOWS_LOCATION_NAME')}/managedApis/azureblob"
      },
      "connection": {
        "id": "/subscriptions/@{appsetting('WORKFLOWS_SUBSCRIPTION_ID')}/resourceGroups/@{appsetting('WORKFLOWS_RESOURCE_GROUP_NAME')}/providers/Microsoft.Web/connections/azureblob"
      },
      "authentication": "@parameters('azureblob-Authentication')",
      "connectionRuntimeUrl": "@parameters('azureblob-ConnectionRuntimeUrl')",
      "connectionProperties": {
        "authentication": {
          "type": "ManagedServiceIdentity",
          "identity": "/subscriptions/${WORKFLOWS_SUBSCRIPTION_ID}/resourcegroups/${AZURE_RESOURCE_GROUP}/providers/Microsoft.ManagedIdentity/userAssignedIdentities/${MANAGED_IDENTITY_NAME}",
          "audience": "https://storage.azure.com/"
        }
      }
    }
  },
  "serviceProviderConnections": {},
  "agentConnections": {}
}
