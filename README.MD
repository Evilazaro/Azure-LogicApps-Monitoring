# Azure Logic Apps Monitoring Solution

[![License](https://img.shields.io/github/license/Evilazaro/Azure-LogicApps-Monitoring)](LICENSE)
[![.NET](https://img.shields.io/badge/.NET-10.0-512BD4?logo=dotnet)](https://dotnet.microsoft.com/)
[![Azure](https://img.shields.io/badge/Azure-Logic%20Apps-0078D4?logo=microsoftazure)](https://azure.microsoft.com/services/logic-apps/)
[![azd](https://img.shields.io/badge/azd-compatible-green?logo=microsoft)](https://learn.microsoft.com/azure/developer/azure-developer-cli/)
[![Build](https://img.shields.io/github/actions/workflow/status/Evilazaro/Azure-LogicApps-Monitoring/azure-dev.yml?branch=main&label=CD)](https://github.com/Evilazaro/Azure-LogicApps-Monitoring/actions/workflows/azure-dev.yml)
[![CI](https://img.shields.io/github/actions/workflow/status/Evilazaro/Azure-LogicApps-Monitoring/ci-dotnet.yml?branch=main&label=CI)](https://github.com/Evilazaro/Azure-LogicApps-Monitoring/actions/workflows/ci-dotnet.yml)
[![Aspire](https://img.shields.io/badge/.NET%20Aspire-13.1.0-512BD4?logo=dotnet)](https://learn.microsoft.com/dotnet/aspire/)
[![PowerShell](https://img.shields.io/badge/PowerShell-7.0+-blue?logo=powershell)](https://docs.microsoft.com/powershell/)
[![Bicep](https://img.shields.io/badge/Bicep-IaC-0078D4?logo=microsoftazure)](https://learn.microsoft.com/azure/azure-resource-manager/bicep/)

---

## ğŸ“‘ Table of Contents

- [ğŸ“‹ Description](#-description)
- [ğŸ—ï¸ Architecture Overview](#ï¸-architecture-overview)
- [âœ… Prerequisites](#-prerequisites)
- [ğŸš€ Quick Start](#-quick-start)
- [ğŸ“ Project Structure](#-project-structure)
- [ğŸ“– Documentation](#-documentation)
- [ğŸ¤ Contributing](#-contributing)
- [ğŸ“„ License](#-license)

---

## ğŸ“‹ Description

The **Azure Logic Apps Monitoring Solution** is a cloud-native reference architecture demonstrating enterprise-grade observability patterns for Azure Logic Apps Standard workflows. Built on **.NET Aspire 13.1.0** orchestration, this solution showcases end-to-end distributed tracing, centralized logging, and comprehensive metrics collection across a microservices-based order management system.

### âœ¨ Key Highlights

| Feature | Description |
|:--------|:------------|
| **Unified Observability** | OpenTelemetry-based instrumentation with W3C Trace Context propagation |
| **Event-Driven Architecture** | Azure Service Bus for reliable, asynchronous order event processing |
| **Infrastructure as Code** | Bicep templates with Azure Developer CLI (azd) for repeatable deployments |
| **Zero-Secret Authentication** | Managed Identity for all service-to-service communication |
| **Cross-Platform Scripts** | PowerShell and Bash automation for Windows, Linux, and macOS |

[ğŸ” Back to Top](#azure-logic-apps-monitoring-solution)

---

## ğŸ—ï¸ Architecture Overview

```mermaid
---
title: Azure Logic Apps Monitoring - Solution Architecture
---
flowchart TD
    %% ===== STYLE DEFINITIONS =====
    classDef primary fill:#4F46E5,stroke:#3730A3,color:#FFFFFF
    classDef secondary fill:#10B981,stroke:#059669,color:#FFFFFF
    classDef datastore fill:#F59E0B,stroke:#D97706,color:#000000
    classDef external fill:#6B7280,stroke:#4B5563,color:#FFFFFF,stroke-dasharray: 5 5
    classDef trigger fill:#818CF8,stroke:#4F46E5,color:#FFFFFF

    %% ===== PRESENTATION LAYER =====
    subgraph Presentation["ğŸ–¥ï¸ Presentation Layer"]
        WebApp["ğŸŒ eShop.Web.App<br/>Blazor Server + FluentUI"]
    end
    style Presentation fill:#EEF2FF,stroke:#4F46E5,stroke-width:2px

    %% ===== APPLICATION LAYER =====
    subgraph Application["âš™ï¸ Application Layer"]
        API["ğŸ“¡ eShop.Orders.API<br/>ASP.NET Core 10.0"]
        LogicApp["ğŸ”„ OrdersManagement<br/>Logic Apps Standard"]
    end
    style Application fill:#ECFDF5,stroke:#10B981,stroke-width:2px

    %% ===== PLATFORM LAYER =====
    subgraph Platform["ğŸ—ï¸ Platform Layer"]
        Aspire["ğŸ¯ app.AppHost<br/>.NET Aspire 13.1.0"]
        Defaults["ğŸ“¦ app.ServiceDefaults<br/>OpenTelemetry + Polly"]
    end
    style Platform fill:#E0E7FF,stroke:#4F46E5,stroke-width:2px

    %% ===== DATA LAYER =====
    subgraph Data["ğŸ’¾ Data Layer"]
        SQL[("ğŸ—„ï¸ Azure SQL<br/>OrderDb")]
        SB["ğŸ“¨ Azure Service Bus<br/>ordersplaced topic"]
        Storage["ğŸ“ Azure Storage<br/>Workflow State"]
    end
    style Data fill:#FEF3C7,stroke:#F59E0B,stroke-width:2px

    %% ===== OBSERVABILITY LAYER =====
    subgraph Observability["ğŸ“Š Observability Layer"]
        AI["ğŸ“ˆ Application Insights"]
        LAW["ğŸ“‹ Log Analytics"]
    end
    style Observability fill:#F3F4F6,stroke:#6B7280,stroke-width:2px

    %% ===== CONNECTIONS - Primary Data Flow =====
    WebApp -->|"HTTP/REST"| API
    API -->|"EF Core"| SQL
    API -->|"AMQP"| SB
    SB -->|"Trigger"| LogicApp
    LogicApp -->|"HTTP Callback"| API
    LogicApp -->|"State"| Storage

    %% ===== CONNECTIONS - Platform Orchestration =====
    Aspire -.->|"Orchestrates"| WebApp
    Aspire -.->|"Orchestrates"| API
    Defaults -.->|"Configures"| WebApp
    Defaults -.->|"Configures"| API

    %% ===== CONNECTIONS - Telemetry =====
    API -.->|"OTLP"| AI
    WebApp -.->|"OTLP"| AI
    LogicApp -.->|"Diagnostics"| AI
    AI -.->|"Logs"| LAW

    %% ===== CLASS ASSIGNMENTS =====
    class WebApp primary
    class API,LogicApp secondary
    class Aspire,Defaults trigger
    class SQL,SB,Storage datastore
    class AI,LAW external
```

| Layer | Components | Purpose |
|:------|:-----------|:--------|
| **Presentation** | eShop.Web.App (Blazor Server + FluentUI) | Interactive UI with order management |
| **Application** | eShop.Orders.API, Logic Apps Standard | REST API + workflow automation |
| **Platform** | .NET Aspire AppHost + ServiceDefaults | Orchestration, service discovery |
| **Data** | Azure SQL, Service Bus, Storage | Persistence, messaging, state |
| **Observability** | Application Insights, Log Analytics | Tracing, metrics, alerting |

> ğŸ“š For detailed architecture documentation, see [Architecture Overview](docs/architecture/README.md).

[ğŸ” Back to Top](#azure-logic-apps-monitoring-solution)

---

## âœ… Prerequisites

| Tool | Version | Purpose |
|:-----|:--------|:--------|
| [Azure CLI](https://learn.microsoft.com/cli/azure/install-azure-cli) | â‰¥ 2.60.0 | Azure resource management |
| [Azure Developer CLI (azd)](https://learn.microsoft.com/azure/developer/azure-developer-cli/install-azd) | â‰¥ 1.11.0 | Infrastructure provisioning & deployment |
| [.NET SDK](https://dotnet.microsoft.com/download) | 10.0 | Application runtime |
| [PowerShell](https://docs.microsoft.com/powershell/scripting/install/installing-powershell) | â‰¥ 7.0 | Cross-platform automation |
| [Docker](https://www.docker.com/products/docker-desktop) | Latest | Local development |

[ğŸ” Back to Top](#azure-logic-apps-monitoring-solution)

---

## ğŸš€ Quick Start

### 1. Clone the Repository

```bash
git clone https://github.com/Evilazaro/Azure-LogicApps-Monitoring.git
cd Azure-LogicApps-Monitoring
```

### 2. Authenticate with Azure

```bash
azd auth login
```

### 3. Create a New Environment

```bash
azd env new <environment-name>
```

### 4. Provision and Deploy

```bash
azd up
```

> ğŸ’¡ **Tip:** This single command validates prerequisites, provisions infrastructure, and deploys applications.

### Additional Commands

```bash
azd provision       # Provision infrastructure only
azd deploy          # Deploy applications only
azd down            # Delete all resources
azd env get-values  # View environment variables
```

[ğŸ” Back to Top](#azure-logic-apps-monitoring-solution)

---

## ğŸ“ Project Structure

```text
Azure-LogicApps-Monitoring/
â”œâ”€â”€ app.AppHost/           # .NET Aspire orchestration (Aspire 13.1.0)
â”œâ”€â”€ app.ServiceDefaults/   # Cross-cutting concerns (OpenTelemetry, health checks)
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ eShop.Orders.API/  # REST API (ASP.NET Core 10.0)
â”‚   â”œâ”€â”€ eShop.Web.App/     # Frontend (Blazor Server + FluentUI)
â”‚   â””â”€â”€ tests/             # Unit tests (MSTest + NSubstitute)
â”œâ”€â”€ infra/                 # Bicep IaC templates
â”‚   â”œâ”€â”€ main.bicep         # Entry point orchestrator
â”‚   â”œâ”€â”€ shared/            # Identity, monitoring, network, data
â”‚   â””â”€â”€ workload/          # Logic Apps, messaging, container services
â”œâ”€â”€ workflows/             # Logic Apps Standard workflow definitions
â”œâ”€â”€ hooks/                 # azd lifecycle scripts (PowerShell + Bash)
â”œâ”€â”€ docs/                  # Comprehensive documentation
â”‚   â”œâ”€â”€ architecture/      # TOGAF-aligned architecture docs
â”‚   â”œâ”€â”€ devops/            # CI/CD pipeline documentation
â”‚   â””â”€â”€ hooks/             # Automation scripts guide
â””â”€â”€ .github/workflows/     # GitHub Actions CI/CD pipelines
```

[ğŸ” Back to Top](#azure-logic-apps-monitoring-solution)

---

## ğŸ“– Documentation

### ğŸ—ï¸ Architecture Documentation

TOGAF-aligned enterprise architecture documentation covering the complete solution design. The architecture docs demonstrate enterprise-grade observability patterns for Azure Logic Apps Standard workflows, featuring OpenTelemetry instrumentation, event-driven messaging with Service Bus, and Infrastructure as Code with Bicep.

| Document | Description |
|:---------|:------------|
| [Architecture Overview](docs/architecture/README.md) | High-level architecture with diagrams |
| [Business Architecture](docs/architecture/01-business-architecture.md) | Stakeholders, capabilities, value streams |
| [Data Architecture](docs/architecture/02-data-architecture.md) | Data stores, flows, telemetry mapping |
| [Application Architecture](docs/architecture/03-application-architecture.md) | Services, APIs, integration patterns |
| [Technology Architecture](docs/architecture/04-technology-architecture.md) | Azure resources, infrastructure topology |
| [Observability Architecture](docs/architecture/05-observability-architecture.md) | Tracing, metrics, logging, alerting |
| [Security Architecture](docs/architecture/06-security-architecture.md) | Identity, secrets, network security |
| [Deployment Architecture](docs/architecture/07-deployment-architecture.md) | IaC, CI/CD, environment management |

### ğŸ“ Architecture Decision Records

ADRs document significant architectural decisions made during the design and development of the solution. Each record captures the context, decision, consequences, and rationale for specific architectural choices following a standardized template.

| ADR | Decision |
|:----|:---------|
| [ADR-001](docs/architecture/adr/ADR-001-aspire-orchestration.md) | .NET Aspire for Service Orchestration |
| [ADR-002](docs/architecture/adr/ADR-002-service-bus-messaging.md) | Azure Service Bus for Async Messaging |
| [ADR-003](docs/architecture/adr/ADR-003-observability-strategy.md) | OpenTelemetry with Azure Monitor |

### ğŸ“š Additional Documentation

Comprehensive guides for CI/CD pipelines with GitHub Actions and cross-platform automation scripts. The DevOps documentation covers OIDC authentication and reusable workflows, while the hooks guide details PowerShell and Bash scripts for environment validation, secret management, and test data generation.

| Document | Description |
|:---------|:------------|
| [DevOps Practices](docs/devops/README.md) | CI/CD pipeline documentation |
| [Developer Hooks](docs/hooks/README.md) | Automation scripts guide |
| [IP Security Restrictions](docs/IP-SECURITY-RESTRICTIONS.md) | Network security configuration |

[ğŸ” Back to Top](#azure-logic-apps-monitoring-solution)

---

## ğŸ¤ Contributing

Contributions are welcome! Please follow these steps:

1. **Fork** the repository
2. **Create** a feature branch (`git checkout -b feature/amazing-feature`)
3. **Commit** your changes (`git commit -m 'Add amazing feature'`)
4. **Push** to the branch (`git push origin feature/amazing-feature`)
5. **Open** a Pull Request

### Development Setup

```bash
# Restore and build
dotnet restore && dotnet build

# Run tests
dotnet test --collect:"XPlat Code Coverage"

# Run locally with Aspire dashboard
dotnet run --project app.AppHost

# Validate environment
./hooks/check-dev-workstation.ps1  # Windows
./hooks/check-dev-workstation.sh   # Linux/macOS
```

[ğŸ” Back to Top](#azure-logic-apps-monitoring-solution)

---

## ğŸ“„ License

This project is licensed under the **MIT License** â€” see the [LICENSE](LICENSE) file for details.

---

<div align="center">

**[Evilazaro](https://github.com/Evilazaro)** â€” Principal Cloud Solution Architect @ Microsoft

</div>
